NEXT JS 

1. In a React project, you have to maintain a separate Backend project for your API routes
2. React does not provide out of the box routing (you have to use react-router-dom)
3. React is not SEO Optimised (not exactly true today because of React Server components)
4. Waterfalling problem

the react is not SEO optimised because of the waterfalling problem 

Search Engine optimisations

Google/Bing has a bunch of crawlers that hit websites and figure out what the website does. 
It ranks it on Google based on the HTML it gets back
The crawlers DONT usually run your JS and render your page to see the final output. 

Waterfall problem 

1. Fetching the index.html from the CDN
2. Fetching script.js from CDN
3. Checking if user is logged in (if not, redirect them to /login page)
4. Fetching the actual blogs
5. There are 4 round trips that happen one after the other (sequentially)

Next.js provides you the following upsides over React
1. Server side rendering - Get’s rid of SEO problems
2. API routes - Single codebase with frontend and backend
3. File based routing (no need for react-router-dom)
4. Bundle size optimisations, Static site generation
5. Maintained by the Vercel team
 
Downsides - 
1. Can’t be distributed via a CDN, always needs a server running that does server side rendering and hence is expensive
2. Very opinionated, very hard to move out of it

in next js the rendering is done on the server side and then the rendered code is returned to the client
in react the renering happens in the client side 

in the react application on building the bundles are created and then they can be distributed unlike next js

in react projects we can run the project via CDNs and it is cheaper than next js

page.tsc has the core code, this is what gets rendered

next js has file based routing. create a folder in app called /users and go to localhost:3000/users to get the content on users page
we can create recursive routes too in the app/ users create /admin to write the logic for the localhost:3000/users/admin url

if there are multiple pages then nextjs pre-fetch pages 

Layouts 

return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        <div className="border-b p-4">Quizio</div>
        {children}
      </body>
    </html>
  );

the children are rendered on the page, you can write code in layout to wrap other code around

any repo which is inside the circular braces () will not be considered in the route 

HYDRATION 

this is the processing of checking if the components on the server side match the client side.
if there is a mismatch it emmits an hydration error.

'use client'

export default function Profile(){
    let x = new Date().getTime();
    // wrap this in the use effect
    return <div>
    Profile Page(x)
    </div>

}

turpopack is a bundler for next js

SERVER SIDE NEXT JS (as next js is a fullstack framework)

make most projects in next js if thre is no reason to use react,
mostly the landing pages are in next js but the core application is in react


since the application can have both the frontend and backend in the same origin so there is no cors issues 

react -> s3 / object store 
node js -> EC2 virtual machine 

for nextJS the frontend and backend are deployed on the same machine

for the react frontend. 
there is the first hit to the frontend and a empty html is returned.
the next hit gets the js and the componets are mounted and rendered

too many requests are going out, waterfalling problem